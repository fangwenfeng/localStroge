<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="tephone=no,email=no,date=no,address=no">
		<style type="text/css">
			html{ background-color: white; }
			header{ border-bottom: 1px solid #ccc; padding: 25px 0; }
			span {
				padding: 5px 15px;
				margin: 10px;
				display: inline-block;
				background-color: #e8e8e8;
			}
		</style>
	</head>
	<body>		
		<span tapmode onclick="wxisInstalled()">微信是否安装</span>
		<span tapmode onclick="wxshareText()">分享文本</span>
		<span tapmode onclick="wxshareImage()">图片</span>
		<span tapmode onclick="wxshareMusic()">音乐</span>
		<span tapmode onclick="wxshareVideo()">Video</span>
		<span tapmode onclick="wxshareWebpage()">Webpage</span>
		<span tapmode onclick="wxshareMutableImg()">MutableImg</span>
		<div class="empty" onclick="aliPayTest();">支付宝支付</div>
	    <span tapmode onclick="qqinstalledTest();">是否安装了qq</span>
	    <span tapmode onclick="qqlogin()">qq登录</span>
	    <span tapmode onclick="qqlogout()">退出</span>
	    <span tapmode onclick="qqgetUserInfo()"> getUserInfo </span>
	    <span tapmode onclick="qqshareText()"> shareText </span>
	    <span tapmode onclick="qqshareImage()"> shareImage </span>
	    <span tapmode onclick="qqshareNews()"> shareNews</span>
	    <span tapmode onclick="qqshareMusic()"> shareMusic</span>
	    <span tapmode onclick="qqshareVideo()"> shareVideo</span>
	</body>
	<script type="text/javascript" src="../script/api.js"></script>
	<script src="../script/SHA1.js "></script>
	<script type="text/javascript">
		var wx;
		var aliPay;var notifyURL = 'http://www.apicloud.com';
    	var qq;
		apiready = function() {
			wx = api.require('wx');
					alert(JSON.stringify(api.appParam));
	        aliPay = api.require('aliPay');
	        aliPay.config({
	            partner:'2088802770059217',
	            seller:'18215552696',
	            rsaPriKey:'MIICXQIBAAKBgQCijY2ZylJrPe1qoHCKu8z1pDDxzRCkjaoYnjJEAl8UqdEFXCact5+jxiy3YCy2Vt2tZUaguoqd1cpkJ/snKotSQ+U+Ltvd7a1cAL69oLvNaxonQ5cxaggYn8XPldpFMARyFSLrLxZwvL2W/1vmvN08L7zh1U2FcPYGU3gJy6SgpQIDAQABAoGACQnN4cs6IfRjixY4q74de1sRzaAVWND3sD67lMR8/O0kTiP9kaE0IysVuWyDj+/si4OiFbXJl1UX19HRSTA4ZtfnqSI3eKMJ2BhMo4WAEUClb19JlD+ZAiPd9vzUNjb3qlXTE0tyo1pMlf+9ACSMLrpP2ME7LMamtUp0I1xrdoECQQDOqkGCbrO3twfyG3drq8qFAhKGT5Udk4gnEdt80LVhbIAX2wdlXT/ze1VD1JngeFnNXFAh9h3oqSGApghQpyEpAkEAyVuC3UeXEPnC586P9m0c+4sDRBj+2bcKpjgbzhBfh+2Pz/BqxscLWJQCe4dPAA86KkaAM8SThc65d2RI0VfHHQJAO6mbT/R1ncwRVyvmxgbKaKu4fV3sRqWY4O6e1uHJ+14/fKOW9wR8ueYZL4PpCIy2IDtORv+uksSBD4rfS6l0QQJBAKRyzIoUMdh3YysWlJTZwFXfzqcLEviUeWoPYQYGcT7+UfmtjEcTwLxzBSQF+gs+ZG6qbYHaBfG+R9KuYJo4ajECQQCu5689epMwQduDPlQJIPbUwu332CW/YSYB6xYn7nej6OOTLozbkwV07h1pVFFM/7VUkAUIvPgQgKZAhLWJUjkk',          
				rsaPubKey:'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCijY2ZylJrPe1qoHCKu8z1pDDxzRCkjaoYnjJEAl8UqdEFXCact5+jxiy3YCy2Vt2tZUaguoqd1cpkJ/snKotSQ+U+Ltvd7a1cAL69oLvNaxonQ5cxaggYn8XPldpFMARyFSLrLxZwvL2W/1vmvN08L7zh1U2FcPYGU3gJy6SgpQIDAQAB',
	            notifyURL:notifyURL
	            },function(ret,err) {
	                api.alert({
	                title: '支付结果',
	                msg: ret.msg,
	                buttons: ['确定']
	            });
	        });
        	qq = api.require('qq');
		};

		function aliPayTest(){
	        aliPay.pay({
	            subject: '订单名',
	            body: '订单描述',
	            amount: '0.01',
	            tradeNO: '4563548735674'
	        },function(ret,err) {
	            api.alert({
	                title: '支付结果',
	                msg: ret.code,
	                buttons: ['确定']
	            });
	        });
	    }
	    function qqinstalledTest(){
	        qq.installed(function(ret,err){
	            if(ret.status){
	               api.alert({msg: "安装"});
	            }else{
	                api.alert({msg: "没有安装"});
	            } 
	        });
	    }
	    function qqlogin() {
	        qq.login(function(ret, err) {
	            if (ret.status) {
	                alert(JSON.stringify(ret))
	            } else {
	                alert(JSON.stringify(err))
	            }
	        });
	    }

	    function qqlogout() {
	        qq.logout(function(ret, err) {
	            if (ret.status) {
	                alert(JSON.stringify(ret))
	            } else {
	                alert(JSON.stringify(err))
	            }
	        });
	    }

	    function qqgetUserInfo() {
	        qq.getUserInfo(function(ret, err) {
	            if (ret.status) {
	                alert(JSON.stringify(ret))
	            } else {
	                alert(JSON.stringify(err))
	            }
	        });
	    }

	    function qqshareText() {
	        qq.shareText({
	            text : 'testtext'
	        }, function(ret, err) {
	            if (ret.status) {
	                alert(JSON.stringify(ret));
	            } else {
	                alert(JSON.stringify(err));
	            }
	        });
	    }

	    function qqshareImage() {
	        qq.shareImage({
	            url:'http://docs.apicloud.com/',
	            title:'test',
	            description:'testd',
	            imgPath:'widget://image/8.png'
	        }, function(ret, err) {
	            if (ret.status) {
	                alert(JSON.stringify(ret));
	            } else {
	                alert(JSON.stringify(err));
	            }
	        });
	    }
	    function qqshareNews() {
	        qq.shareNews({
	            url:'http://docs.apicloud.com/',
	            title:'新闻分享',
	            description:'新闻描述',
	            imgUrl:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/9ddf7d56095abd26f2c7ef72bb142563.jpg'
	        }, function(ret, err) {
	            if (ret.status) {
	                alert(JSON.stringify(ret));
	            } else {
	                alert(JSON.stringify(err));
	            }
	        });
	    }
	    function qqshareMusic() {
	        qq.shareMusic({
	            url:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/591bde468d4e44b21cc225b7b6e1129a.mp3',
	            title:'桔子香水',
	            description:'任贤齐',
	            imgUrl:'http://upload.wabei.cn/2011/0807/20110807025817844.jpg'
	        }, function(ret, err) {
	            if (ret.status) {
	                alert(JSON.stringify(ret));
	            } else {
	                alert(JSON.stringify(err));
	            }
	        });
	    }
	    function qqshareVideo() {
	        qq.shareVideo({
	            url:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/903ca10851a482ccd1383b62abb3ec5c.mp4',
	            title:'视频',
	            description:'王力宏',
	            type:'QFriend',
	            imgUrl:'widget://image/8.png'
	        }, function(ret, err) {
	            if (ret.status) {
	                alert(JSON.stringify(ret));
	            } else {
	                alert(JSON.stringify(err));
	            }
	        });
	    }
	    
		function wxisInstalled() {
			wx.isInstalled(function(ret, err) {
				if (ret.installed) {
					alert(JSON.stringify(ret))
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxshareText() {
			wx.shareText({
				apiKey : '',
				scene : 'timeline',
				text : '我分享的文本'
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret))
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxshareImage() {
			wx.shareImage({
				apiKey : '',
				//session(会话),timeline(朋友圈),favorite(收藏)
				scene : 'timeline', 
				thumb : 'widget://image/girl.png',
				contentUrl : "widget://image/8.jpg"
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret))
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxshareMusic() {
			wx.shareMusic({
				apiKey : '',
				scene : 'session',
				title : '分享音乐',
				description : '分享音乐的描述',
				thumb : 'widget://image/6.jpg',
				musicDataUrl : "http://docs.apicloud.com/test/m.mp3",
				contentUrl : 'http://www.baidu.com'
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret))
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxshareVideo() {
			wx.shareVideo({
				apiKey : '',
				scene : 'session',
				title : '分享视频',
				description : '分享视频的描述',
				thumb : 'widget://image/8.jpg',
				contentUrl : 'http://www.youku.com/'
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret))
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxshareWebpage() {
			wx.shareWebpage({
				apiKey : '',
				scene : 'session',
				title : '分享网页的标题',
				description : '分享网页的描述',
				thumb : 'widget://image/6.jpg',
				contentUrl : 'http://www.apicloud.com'
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret))
				} else {
					alert(JSON.stringify(err))
				}
			});
		}
// 登录类接口，需要在微信开放平台交300元，认证微信开发者后，申请微信登录能力。
		function wxauth() {
			wx.auth({
				apiKey : ''
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret));
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxgetToken() {
			wx.getToken({
				apiKey : '',
				apiSecret : '',
				code : "12346857684"
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret));
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxgetUserInfo() {
			wx.getUserInfo({
				accessToken : '',
				openId : ''
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret));
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxrefreshToken() {
			wx.refreshToken({
				apiKey : '',
				dynamicToken : ''
			}, function(ret, err) {
				if (ret.status) {
					alert(JSON.stringify(ret));
				} else {
					alert(JSON.stringify(err))
				}
			});
		}

		function wxshareMutableImg() {
			wx.shareMutableImg({
				description : 'weixin share image test description',
				imgs : ['widget://res/girl.png', 'widget://res/8.jpg', 'widget://res/6.jpg']
			});
		}
	</script>
</html>
