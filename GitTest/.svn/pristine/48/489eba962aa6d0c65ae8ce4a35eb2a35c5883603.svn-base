<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>开发</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <style>
        .empty{ text-align: center; padding: 15px; }
        span {
            padding: 5px 15px;
            margin: 10px;
            display: inline-block;
            background-color: #e8e8e8;
        }
    </style>
</head>
<body>
    <div class="empty" onclick="aliPayTest();">支付宝支付</div>
    <span tapmode onclick="qqinstalledTest();">是否安装了qq</span>
    <span tapmode onclick="login()"> login </span>
    <span tapmode onclick="logout()"> logout </span>
    <span tapmode onclick="getUserInfo()"> getUserInfo </span>
    <span tapmode onclick="shareText()"> shareText </span>
    <span tapmode onclick="shareImage()"> shareImage </span>
    <span tapmode onclick="shareNews()"> shareNews</span>
    <span tapmode onclick="shareMusic()"> shareMusic</span>
    <span tapmode onclick="shareVideo()"> shareVideo</span>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script src="../script/SHA1.js "></script>
<script>
    var aliPay;var notifyURL = 'http://www.apicloud.com';
    var qq;
	apiready = function() {
		alert(JSON.stringify(api.appParam));
        aliPay = api.require('aliPay');
        aliPay.config({
            partner:'12345678901234',
            seller:'123456789024354',
            rsaPriKey:'testKEY',
            rsaPubKey:'testKEY',
            notifyURL:notifyURL
            },function(ret,err) {
                api.alert({
                title: '支付结果',
                msg: ret.msg,
                buttons: ['确定']
            });
        });
        qq = api.require('qq');
	};
    function qqinstalledTest(){
        qq.installed(function(ret,err){
            if(ret.status){
               api.alert({msg: "安装"});
            }else{
                api.alert({msg: "没有安装"});
            } 
        });
    }
    function login() {
        qq.login(function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret))
            } else {
                alert(JSON.stringify(err))
            }
        });
    }

    function logout() {
        qq.logout(function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret))
            } else {
                alert(JSON.stringify(err))
            }
        });
    }

    function getUserInfo() {
        qq.getUserInfo(function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret))
            } else {
                alert(JSON.stringify(err))
            }
        });
    }

    function shareText() {
        qq.shareText({
            text : 'testtext'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }

    function shareImage() {
        qq.shareImage({
            url:'http://docs.apicloud.com/',
            title:'test',
            description:'testd',
            imgPath:'widget://image/8.png'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }
    function shareNews() {
        qq.shareNews({
            url:'http://docs.apicloud.com/',
            title:'新闻分享',
            description:'新闻描述',
            imgUrl:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/9ddf7d56095abd26f2c7ef72bb142563.jpg'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }
    function shareMusic() {
        qq.shareMusic({
            url:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/591bde468d4e44b21cc225b7b6e1129a.mp3',
            title:'桔子香水',
            description:'任贤齐',
            imgUrl:'http://upload.wabei.cn/2011/0807/20110807025817844.jpg'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }
    function shareVideo() {
        qq.shareVideo({
            url:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/903ca10851a482ccd1383b62abb3ec5c.mp4',
            title:'视频',
            description:'王力宏',
            type:'QFriend',
            imgUrl:'widget://image/8.png'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }

    function aliPayTest(){
        aliPay.pay({
            subject: '订单名',
            body: '订单描述',
            amount: '0.01',
            tradeNO: '4563548735674'
        },function(ret,err) {
            api.alert({
                title: '支付结果',
                msg: ret.code,
                buttons: ['确定']
            });
        });
    }
</script>
</html>