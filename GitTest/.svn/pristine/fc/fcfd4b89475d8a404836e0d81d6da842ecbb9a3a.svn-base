<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>开发</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <style>
        .empty{ text-align: center; padding: 15px; }
        span {
            padding: 5px 15px;
            margin: 10px;
            display: inline-block;
            background-color: #e8e8e8;
        }
    </style>
</head>
<body>
    <div class="empty" onclick="aliPayTest();">支付宝支付</div>
    <span tapmode onclick="qqinstalledTest();">是否安装了qq</span>
    <span tapmode onclick="login()"> login </span>
    <span tapmode onclick="logout()"> logout </span>
    <span tapmode onclick="getUserInfo()"> getUserInfo </span>
    <span tapmode onclick="shareText()"> shareText </span>
    <span tapmode onclick="shareImage()"> shareImage </span>
    <span tapmode onclick="shareNews()"> shareNews</span>
    <span tapmode onclick="shareMusic()"> shareMusic</span>
    <span tapmode onclick="shareVideo()"> shareVideo</span>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script src="../script/SHA1.js "></script>
<script>
    var aliPay;var notifyURL = 'http://www.apicloud.com';
    var qq;
	apiready = function() {
		alert(JSON.stringify(api.appParam));
        aliPay = api.require('aliPay');
        aliPay.config({
            partner:'2088802770059217',
            seller:'18215552696',
            rsaPriKey:'MIICXQIBAAKBgQCijY2ZylJrPe1qoHCKu8z1pDDxzRCkjaoYnjJEAl8UqdEFXCact5+jxiy3YCy2Vt2tZUaguoqd1cpkJ/snKotSQ+U+Ltvd7a1cAL69oLvNaxonQ5cxaggYn8XPldpFMARyFSLrLxZwvL2W/1vmvN08L7zh1U2FcPYGU3gJy6SgpQIDAQABAoGACQnN4cs6IfRjixY4q74de1sRzaAVWND3sD67lMR8/O0kTiP9kaE0IysVuWyDj+/si4OiFbXJl1UX19HRSTA4ZtfnqSI3eKMJ2BhMo4WAEUClb19JlD+ZAiPd9vzUNjb3qlXTE0tyo1pMlf+9ACSMLrpP2ME7LMamtUp0I1xrdoECQQDOqkGCbrO3twfyG3drq8qFAhKGT5Udk4gnEdt80LVhbIAX2wdlXT/ze1VD1JngeFnNXFAh9h3oqSGApghQpyEpAkEAyVuC3UeXEPnC586P9m0c+4sDRBj+2bcKpjgbzhBfh+2Pz/BqxscLWJQCe4dPAA86KkaAM8SThc65d2RI0VfHHQJAO6mbT/R1ncwRVyvmxgbKaKu4fV3sRqWY4O6e1uHJ+14/fKOW9wR8ueYZL4PpCIy2IDtORv+uksSBD4rfS6l0QQJBAKRyzIoUMdh3YysWlJTZwFXfzqcLEviUeWoPYQYGcT7+UfmtjEcTwLxzBSQF+gs+ZG6qbYHaBfG+R9KuYJo4ajECQQCu5689epMwQduDPlQJIPbUwu332CW/YSYB6xYn7nej6OOTLozbkwV07h1pVFFM/7VUkAUIvPgQgKZAhLWJUjkk',          
rsaPubKey:'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCijY2ZylJrPe1qoHCKu8z1pDDxzRCkjaoYnjJEAl8UqdEFXCact5+jxiy3YCy2Vt2tZUaguoqd1cpkJ/snKotSQ+U+Ltvd7a1cAL69oLvNaxonQ5cxaggYn8XPldpFMARyFSLrLxZwvL2W/1vmvN08L7zh1U2FcPYGU3gJy6SgpQIDAQAB',
            notifyURL:notifyURL
            },function(ret,err) {
                api.alert({
                title: '支付结果',
                msg: ret.msg,
                buttons: ['确定']
            });
        });
        qq = api.require('qq');
	};
    function aliPayTest(){
        aliPay.pay({
            subject: '订单名',
            body: '订单描述',
            amount: '0.01',
            tradeNO: '4563548735674'
        },function(ret,err) {
            api.alert({
                title: '支付结果',
                msg: ret.code,
                buttons: ['确定']
            });
        });
    }
    function qqinstalledTest(){
        qq.installed(function(ret,err){
            if(ret.status){
               api.alert({msg: "安装"});
            }else{
                api.alert({msg: "没有安装"});
            } 
        });
    }
    function login() {
        qq.login(function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret))
            } else {
                alert(JSON.stringify(err))
            }
        });
    }

    function logout() {
        qq.logout(function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret))
            } else {
                alert(JSON.stringify(err))
            }
        });
    }

    function getUserInfo() {
        qq.getUserInfo(function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret))
            } else {
                alert(JSON.stringify(err))
            }
        });
    }

    function shareText() {
        qq.shareText({
            text : 'testtext'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }

    function shareImage() {
        qq.shareImage({
            url:'http://docs.apicloud.com/',
            title:'test',
            description:'testd',
            imgPath:'widget://image/8.png'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }
    function shareNews() {
        qq.shareNews({
            url:'http://docs.apicloud.com/',
            title:'新闻分享',
            description:'新闻描述',
            imgUrl:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/9ddf7d56095abd26f2c7ef72bb142563.jpg'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }
    function shareMusic() {
        qq.shareMusic({
            url:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/591bde468d4e44b21cc225b7b6e1129a.mp3',
            title:'桔子香水',
            description:'任贤齐',
            imgUrl:'http://upload.wabei.cn/2011/0807/20110807025817844.jpg'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }
    function shareVideo() {
        qq.shareVideo({
            url:'http://7xq864.com1.z0.glb.clouddn.com/apicloud/903ca10851a482ccd1383b62abb3ec5c.mp4',
            title:'视频',
            description:'王力宏',
            type:'QFriend',
            imgUrl:'widget://image/8.png'
        }, function(ret, err) {
            if (ret.status) {
                alert(JSON.stringify(ret));
            } else {
                alert(JSON.stringify(err));
            }
        });
    }
</script>
</html>