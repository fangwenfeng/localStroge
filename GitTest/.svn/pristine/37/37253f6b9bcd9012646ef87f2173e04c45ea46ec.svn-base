<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"/>
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <title>Hello APP</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
	<style>
		.divCss{
			height: 60px;
			line-height: 60px;
			color: #000;
			font-size:18px;
			text-align: center;
			border-bottom: 1px solid #444;
		}
	    span {
	        padding: 10px 15px;
	        margin: 10px;
	        display: inline-block;
	        background-color: #e8e8e8;
        }
    	.hover{ opacity: .4; }
	</style>
</head>
<body>
	<div class="divCss" onclick="openMenu()">导航菜单</div>
	<div class="divCss" onclick="openSpecialIndexl()">特效</div>
	<div class="divCss" onclick="openDialogBoxIndex()">dialogBoxIndex</div>
	<div class="divCss" onclick="openOthers()">其他的3D图片和聊天输入框</div>
	<div class="divCss" onclick="openSlidingList()">sliding_select</div>
	<div class="divCss" onclick="openUIListView()">UIListView</div>
	<div class="divCss" onclick="openListContact()">listContact</div>
	<div class="divCss" onclick="appInstalled_test()">是否安装应用</div>
	<div class="divCss" onclick="installApp_test()">安装应用</div>
	<div class="divCss" onclick="openApp_test()">打开应用</div>

	<span tapmode="hover" onclick="fnOpen()">打开侧滑布局</span>

	<div class="divCss" onclick="getCache_test()">获取缓存大小</div>
	<div class="divCss" onclick="clearCache_test()">清除缓存</div>
	<div class="divCss" onclick="call_test()">拨打电话</div>
	<div class="divCss" onclick="sms_test()">发送短信</div>
	<div class="divCss" onclick="openContacts_test()">打开系统通讯录</div>
	<div class="divCss" onclick="getPicture_test()">获取图片</div>

	</div>
   
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
	function openMenu(){
		api.openWin({
		    name: 'menuIndex',
		    url: 'menuIndex.html',
		});
	}
	function openDialogBoxIndex(){
		api.openWin({
		    name: 'dialogBoxIndex',
		    url: 'dialogBoxIndex.html',
		});
	}
	function openSpecialIndexl(){
		api.openWin({
		    name: 'specialIndexl',
		    url: 'specialIndexl.html',
		});
	}
	function openOthers(){
		api.openWin({
		    name: 'othersIndex',
		    url: 'othersIndex.html',
		});
	}
	function openSlidingList(){
		api.openWin({
		    name: 'sliding_selectIndex',
		    url: 'sliding_selectIndex.html',
		});
	}
	function openUIListView(){
		api.openWin({
		    name: 'listviewPage',
		    url: 'listviewPage.html',
		});
	}
	function openListContact(){
		api.openWin({
		    name: 'listContact',
		    url: 'listContact.html',
		});
	}
	
	function getCache_test(){
		api.getCacheSize(function(ret){
		    var size = ret.size;
		    alert(size);
		});
	}
	function clearCache_test(){
		api.clearCache(function(){
		    api.toast({
		        msg:'清除完成'
		    });
		});
	}
	function call_test(){
		api.call({
		    type: 'tel_prompt',
		    number: '10086'
		});
	}
	function sms_test(){
		api.sms({
		    numbers: ['10086'],
		    text: '测试短信'
		},function(ret, err){
		    if(ret.status){
		         alert('已发送');
		    }else{
		        alert('发送失败');
		    }
		});
	}
	function openContacts_test(){
		api.openContacts(function(ret, err){
		    if(ret.status){
		         var name = ret.name;
		         var phone = ret.phone;
		         alert("姓名："+name+"；电话："+phone);
		    }else{

		    } 
		});
	}
	function getPicture_test(){
		api.getPicture({
		    sourceType: 'library',
		    encodingType: 'jpg',
		    mediaValue: 'pic',
		    destinationType: 'url',
		    allowEdit: true,
		    quality: 50,
		    targetWidth: 100,
		    targetHeight: 100,
		    saveToPhotoAlbum: false
		}, function(ret, err){ 
		    if(ret){
		         alert(JSON.stringify(ret));
		    }else{
		         alert(JSON.stringify(err));
		    }
		});
	}

	function fnOpen(){
	    api.openDrawerLayout({
		    name: 'panel',
		    url: 'panel.html',
		    leftPane: {
		        name: 'leftPane',
		        url: 'leftPane.html'
		    },
		    animation: {
		    	type: 'push'
		    }
		});
	}
    
	function appInstalled_test(){
		var appBundle;
		if (api.systemType == 'ios') {
			appBundle = 'svnTestApp://' ;      //ios指定的是urlScheme
		}else{
			appBundle = 'com.g1151250805.ose' ;  //android指定的是包名
		}
		api.appInstalled({
		    appBundle: appBundle
		},function(ret, err){
		    if(ret.installed){
		        alert('应用已安装');
		    }else{
		        alert('应用没有安装');
		    }
		});
	}
	function installApp_test(){
		//Android用法：
		// var fs = api.require('fs');
		// fs.copyTo({
		// 	oldPath:'widget://res/svnTest.apk';
		// 	newPath:'fs://package/';
		// },function((ret, err){
		// 	api.installApp({
		// 	    appUri: 'fs://package/svnTest.apk'     //安装的路径
		// 	});
		// })	;
	}
	function openApp_test(){
		//Android中的使用方法
		api.openApp({
		    androidPkg: 'com.g1151250805.ose',
		    appParam: {name:'broad'},
		}, function(ret, err){
		    if(ret){
		         alert(JSON.stringify(ret));
		    }else{
		         alert(JSON.stringify(err));
		    }
		});
	}

	apiready = function(){
		api.setRefreshHeaderInfo({    //下拉刷新
		    visible: true,
		    loadingImg: 'widget://image/loading_more.gif',
		    bgColor: '#ccc',
		    textColor: '#fff',
		    textDown: '下拉刷新...',
		    textUp: '松开刷新...',
		    showTime: true
		}, function(ret, err){
		    if(ret){
		        api.refreshHeaderLoadDone();
		    }		    
		});
		
    };
</script>
</html>